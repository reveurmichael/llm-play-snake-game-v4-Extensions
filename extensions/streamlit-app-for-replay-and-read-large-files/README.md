# Streamlit App for Replay and Large File Reading

A comprehensive Streamlit application for replaying Snake Game AI sessions and reading large log files with elegant navigation and display capabilities.

## üéØ Features

### üéÆ Game Replay
- **PyGame Replay**: Visual replay of recorded games using PyGame interface
- **Web Replay**: Browser-based replay with Flask web server
- **Game Selection**: Browse and select from all recorded experiments
- **Speed Control**: Adjustable replay speed for detailed analysis
- **Game Preview**: View game statistics and JSON data before replay

### üìÅ Large File Reader
- **Multi-format Support**: JSON, CSV, and JSONL files
- **Large File Handling**: Efficiently handle files up to 10GB+
- **Pagination**: Navigate through large files with customizable page sizes
- **Line Jumping**: Jump to any specific line in large files
- **Smart Display**: Format-specific rendering for optimal readability

## üöÄ Installation and Usage

### Prerequisites
```bash
# Core dependencies (should already be installed)
pip install streamlit pandas

# Optional: For PyGame replay (if not already installed)
pip install pygame
```

### Running the App
```bash
# From the extension directory
cd extensions/streamlit-app-for-replay-and-read-large-files
streamlit run app.py

# Or from project root
streamlit run extensions/streamlit-app-for-replay-and-read-large-files/app.py
```

The app will open in your default web browser at `http://localhost:8501`

## üìñ Usage Guide

### Game Replay

1. **Select the "üéÆ Game Replay" tab**
2. **Choose replay mode**:
   - **PyGame Replay**: For visual desktop replay
   - **Web Replay**: For browser-based replay

3. **Select experiment and game**:
   - Choose from available experiments in logs/
   - Select specific game by number and score
   - Preview game statistics and JSON data

4. **Configure replay options**:
   - **PyGame**: Adjust replay speed (0.1x to 2.0x)
   - **Web**: Set host and port for web server

5. **Launch replay**:
   - Click the appropriate launch button
   - Follow on-screen instructions

### Large File Reading

1. **Select the "üìÅ Large File Reader" tab**
2. **Choose a file** from the dropdown (sorted by size, largest first)
3. **Configure navigation**:
   - Set lines per page (50, 100, 200, 500, 1000)
   - Use "Go to line" to jump to specific locations
   - Navigate with Previous/Next page buttons

4. **View content**:
   - **JSON**: Pretty-printed with syntax highlighting
   - **CSV**: Table view with column information
   - **JSONL**: Line-by-line JSON object display
   - **Text**: Raw content with line numbers

## üèóÔ∏è Architecture

### Design Philosophy
- **SUPREME_RULE NO.5 Compliance**: Pure Streamlit launcher interface
- **Task0 Integration**: Leverages existing replay infrastructure
- **Memory Efficiency**: Handles large files without loading entire content
- **User Experience**: Clean, intuitive interface design

### Key Components

#### Replay Functionality
```python
class ReplayAndFileApp:
    def render_pygame_replay(self, log_folders):
        # PyGame replay using Task0 infrastructure
        
    def render_web_replay(self, log_folders):
        # Web replay using Task0 infrastructure
```

#### File Reading
```python
def render_file_content(self, file_path):
    # Efficient file reading with pagination
    
def display_json_content(self, file_path, start_line, end_line):
    # JSON-specific display with syntax highlighting
    
def display_csv_content(self, file_path, start_line, end_line):
    # CSV display with pandas dataframe
```

### Integration with Task0

The app reuses Task0 replay infrastructure:
- **`core.game_file_manager.FileManager`**: File discovery and management
- **`utils.session_utils.run_replay`**: PyGame replay execution
- **`utils.session_utils.run_web_replay`**: Web replay execution
- **`config.network_constants.HOST_CHOICES`**: Network configuration

## üìä File Format Support

### JSON Files
- **Pretty-printed display** with syntax highlighting
- **Large JSON handling** with efficient loading
- **Error recovery** for malformed JSON files
- **Single object** or **array of objects** support

### CSV Files
- **Pandas dataframe display** with sorting and filtering
- **Column information** with data types and statistics
- **Large CSV handling** with pagination
- **Memory efficient** loading of subsets

### JSONL Files
- **Line-by-line JSON display** with expandable sections
- **Individual JSON object** parsing and formatting
- **Error handling** for malformed lines
- **Efficient navigation** through large JSONL files

## üéØ Use Cases

### Development and Debugging
- **Replay game sessions** to understand AI behavior
- **Analyze large datasets** generated by extensions
- **Debug game logs** with detailed navigation
- **Compare different algorithm performances**

### Research and Analysis
- **Review training data** from heuristics extensions
- **Analyze model outputs** from supervised learning
- **Study game patterns** across multiple sessions
- **Examine large experimental datasets**

### Educational Applications
- **Demonstrate AI behavior** through visual replay
- **Explore dataset structures** with interactive navigation
- **Study algorithm performance** through recorded sessions
- **Learn from game patterns** and decision-making processes

## üîß Technical Details

### Memory Management
- **Streaming file reading**: Never loads entire large files into memory
- **Pagination**: Displays only requested lines/rows
- **Efficient counting**: Fast line counting without full file load
- **Error recovery**: Graceful handling of memory constraints

### Performance Optimization
- **Lazy loading**: Content loaded only when needed
- **Caching**: Streamlit caching for file metadata
- **Efficient navigation**: Fast jumping to any file position
- **Responsive UI**: Maintains responsiveness with large files

### Error Handling
- **File access errors**: Clear error messages and recovery suggestions
- **Format errors**: Graceful handling of malformed files
- **Memory constraints**: Automatic fallback to smaller page sizes
- **Network errors**: Proper error handling for web replay

## üîó Integration

### With Other Extensions
- **Heuristics v0.04**: Replay heuristic algorithm sessions
- **Supervised v0.03**: Analyze ML model training data
- **Task0**: Full integration with LLM replay infrastructure
- **Future Extensions**: Compatible with any extension generating logs

### File Compatibility
- **All Task0 outputs**: game_N.json, summary.json files
- **Extension datasets**: CSV datasets from heuristics
- **Training logs**: JSONL files for LLM fine-tuning
- **Any log format**: Generic text file support

---

**This Streamlit app provides a comprehensive solution for game replay and large file analysis, perfectly complementing the Snake Game AI project's development and research workflows.**